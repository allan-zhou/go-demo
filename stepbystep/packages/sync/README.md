# sync

资源竞争问题： 当不同线程要使用同一个变量（共享变量）时，无法预知变量被不同线程修改的顺序!

经典做法：
一次只能让一个线程对共享变量进行操作。
当变量被一个线程改变时（临界区），为它上锁，直到这个线程执行完成并解锁后，其他线程才能访问它。

> map类型是不存在锁的机制来实现这种效果（出于对性能的考虑），所以**map类型是非线程安全**的。当并行访问一个共享的map类型的数据，map数据将会出错。

## sync.Mntex

Go语言中这种锁的机制通过Sync包中的Mutex来实现。

sync.Mutex是一个互斥锁，它的作用是守护在临界区入口来确保同一时间只能有一个线程进入临界区。

